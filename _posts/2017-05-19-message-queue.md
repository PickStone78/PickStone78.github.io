---
layout: post
title:  消息队列
categories: 物联网
---

我做过多个项目,都碰到了同样的问题：如何才能让数据在互联网上简单,安全的传输。一般人们都会说使用数据库，但数据库这个东西其实用起来并不方便。举一个场景来说明这样的问题。

如果我们要做一个最简单的网站,我们需要三个组件:服务器,数据库以及网站内容。这些东西不会存在任何技术风险,有大量的开源和商业产品供我们挑选。

好了,现在生意做大了,有越来越多的用户开始访问我们的网站,这意味着我们需要提高服务的并发量,否则用户会觉得访问太慢。因此,我们需要提高服务器的并发量和数据库的并发量。这里会存在一些技术风险。我们可以购买一些昂贵的商业产品来回避这种风险。

现在到了第三个阶段了,我们的服务内容越来越多,动态交互越来越复杂,这些都需要数据库的支持。这就意味着会有海量的数据堆积在数据库,不可避免的,数据库会越来越复杂,越来越慢。这里面会存在大量的技术风险。

这样的三个阶段感觉就像是淘宝的技术史。淘宝很强大,它逐步的解决了这些问题。但其他的公司怎么去复制这种成功呢?阿里云最近推出了消息队列这样一个产品,就是希望能够复制这种成功,让更多的公司以更少的代价提供类似的服务。

消息队列是一个很经典的服务，无论是开源产品还是商业产品，已经有很多了。举几个开源的产品吧，[RabbitMQ](https://www.rabbitmq.com/)，[ActiveMQ](http://activemq.apache.org/)，[Kafka](http://kafka.apache.org/)，等等。

消息队列之所以经典，是因为它为我们的应用开发提供了一个经典的模式，[发布/订阅](https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)(Publish/Subscribe)。这个模式对消息发送者和消息接收者之间的依赖关系进行了解耦合，我们在做应用开发的时候只需要关注自身的业务逻辑即可。

基于兴趣，我基于[node.js](https://nodejs.org/en/)也做了一个开源的消息队列，包括[服务端](https://github.com/PickStone78/router.io-server)和[客户端](https://github.com/PickStone78/router.io-client)

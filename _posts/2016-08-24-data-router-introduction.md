---
layout: post
title:  数据路由产品简介
categories: 数据路由
---
经过一年多的尝试,整理和重构,数据路由终于形成了一个可持续发布的基础技术框架。目前,这个产品可以满足当初的一些想法,对外提供一些简单的数据路由服务。因此,在这里做个记录,对当前的产品做个总结,也对未来的产品做个展望。

最初,我开始萌发做这个产品的想法,是因为我在做好几个项目的时候,都碰到了同样的问题,如何才能让数据在互联网上简单,安全的传输。传统的方法是使用数据库。然而,就像我在[我们为什么要使用数据路由呢](https://pickstone78.github.io/%E6%95%B0%E6%8D%AE%E8%B7%AF%E7%94%B1/2016/04/13/why-data-router.html)一文中阐述的,随着数据量和访问量的增多,传统的数据库是难以提供高质量服务的。因此,在构建大型的互联网应用时,人们常常会使用数据缓存技术和消息中间件产品来提供质量更好的服务。

随着物联网的逐渐兴起,这样的情况必定会越来越多。然而,如果每一个公司都做这样的东西,其实社会成本还是很高的。因此,现在国内国际都开始有公司提供这样的产品,包括谷歌,IBM,阿里云。好了,关于商业产品的介绍也只能到此为止了,因为我做的这个产品只是利用业余时间玩的一个个人项目,没有时间也没有必要去和商业产品进行比较。还是让我们将目光转向开源的项目上吧。

最初,因为经验和能力的问题,我对这个产品的需求考虑的十分简单。我觉得通过几个Restful服务使终端能够上传和下载数据即可。但随着思考的深入,我认识到这个产品必须提供一个基本的服务框架,才能满足使用者的多样性需求。因此我开始关注一些成熟的开源的消息中间件,我认识到发布订阅模式可以满足基本的使用需求,通过这个模式,我们可以实现消息发送和接收的解耦,从而满足使用者在数据传输方面的多种需求。因此提供这种模式是这个产品最基本的需求。

然而在使用开源的消息中间件构建某些应用时,我遇到了一些麻烦。虽然这些问题得到了解决,但解决方案比较复杂,不值得进行推广。为了保证系统架构的干净和整洁,为了让我能够比较轻松的尝试一些新的想法,我决定自己搭建一个这样的产品。基于前面的积累，我定义了下面的一些需求。

这个产品首先依赖于发布订阅模式对外提供数据传输服务，这是最基本的需求。

其次，因为终端的多样性，使用者既可能通过浏览器、也可能通过app甚至一些嵌入式设备访问这些服务，因此这个产品应该支持多种通信协议。但因为人力的限制，当前阶段不可能做到这样。因此，它首先应该支持http协议，这样可以最大限度的支持多种终端。

在互联网上传输数据应该是安全的，这样用户才能放心的使用这个产品。因此网络安全和认证机制是必需的。

最后，只有发布数据的用户才享有数据的控制权，只有他可以决定这个数据是公开的还是私有的。数据的订阅者只能够根据自己的权限消费数据，这样才可以最大限度的保证用户的数据安全,同时也有利于数据的共享。

基于上述想法,我开发了一个基础的数据路由产品。它的基本功能可以经由[chat demo](https://120.25.120.140/chat/index.html)演示。demo呈现的是一个聊天网页,当用户输入聊天内容后,聊天内容会被发送到互联网上,然后网页会将聊天内容下载下来,并呈现给用户。在这个过程中,数据路由为demo提供了一个基于https的数据管道。demo对数据路由的访问是通过发布订阅机制进行的。现在由于安全证书的问题,在实际使用demo之前,最好先单独的访问一下https://120.25.120.140:3030/publish,然后不用管该网页,直接关闭即可;再继续使用demo。

当然,现在的这个产品离我的想法还有一段距离,还需要更进一步的打磨。千里之行,始于足下。只有做好这个产品,我后面的一些想法才能得到实现。
